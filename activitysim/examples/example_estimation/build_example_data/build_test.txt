


ESTIMATION_DIR=..
MTC_EXAMPLE_DIR=$ESTIMATION_DIR/../example_mtc


TAG=test
INPUT_DATA=$MTC_EXAMPLE_DIR/data

EXAMPLE_CONFIGS=$MTC_EXAMPLE_DIR/configs
BUILD_CONFIGS=configs_build_$TAG

# run this to create fake sample data (random seed 1)
python $ESTIMATION_DIR/simulation.py -d $INPUT_DATA -c $BUILD_CONFIGS -c $EXAMPLE_CONFIGS -o output_build_$TAG



# run this to create fake sample data (random seed 1)
python $SCRIPTS/simulation.py -hh $HH -d $INPUT_DATA -c $LOCAL_CONFIGS -c $EXAMPLE_CONFIGS -o $OUTPUT

# copy raw tables to data directory DATA/*.csv
cp $OUTPUT/raw_tables/*.csv $DATA/

# copy final_tables to DATA/survey_data/*.csv
cp $OUTPUT/final_*.csv $DATA/survey_data/

# copy omx to DATA/survey_data/*.csv
cp $INPUT_DATA/skims.omx $DATA/

# create survey_xxx.csv files households, persons, tours, joint_tour_participants
# DATA/final_xxx.csv -> DATA/survey_xxx.csv
python $SCRIPTS/extract_survey_data.py $DATA

# create override_xxx.csv files
python $SCRIPTS/infer.py $DATA $EXAMPLE_CONFIGS

wc -l $DATA/households.csv
wc -l $DATA/survey_data/override_households.csv

python $SCRIPTS/simulation.py -c ./configs -c $EXAMPLE_CONFIGS -d $DATA -o output_$TAG
