Label,Description,Expression,Coefficient
# ESCORT,,,
util_escort_mode_choice_logsum,ESCORT - Mode Choice Logsum,"@np.where(df.tour_type == 'escort', df.mode_choice_logsum, 0) ",coef_escort_mode_choice_logsum
"#Note: In CTRAMP expressions, duration alternative is from 1 to 48 but in ActivitySim, it is from 0 to 47 since the duration alternative ID was calculated as (end - start). Therefore, duration in ActivitySim expression = CTRAMP duration expresssion - 1 ",,,#
util_escort_distance_to_destination_duration_less_than_30_minutes,ESCORT - Distance to destination - Duration less than 0.5 hour (depart and arrive in the same period),"@np.where(((df.duration<1)), ((df.origin_to_destination_distance) * (np.where((df.duration<=1), np.minimum(1-df.duration, 0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0))), 0)",coef_escort_distance_to_destination_duration_less_than_30_minutes
util_escort_distance_to_destination_duration_greater_than_30_minutes,ESCORT - Distance to destination - Duration greater than 0.5 hour,"@np.where(((df.duration>1)), ((df.origin_to_destination_distance) * (np.where((df.duration<=1), np.minimum(1-df.duration, 0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0))), 0)",coef_escort_distance_to_destination_duration_greater_than_30_minutes
util_escort_fulltime_worker_departure_after_8_am_linear,ESCORT - Full-time worker - Departure after 8:00 am - Linear,"@np.where(((df.ptype == 1) & (df.start>10)), (np.where((df.start<=10), np.minimum(10-df.start,7), 0) + np.where((df.start>10), np.minimum(df.start-10,35), 0)),0)",coef_escort_fulltime_worker_departure_after_8_am_linear
"#Note: In CTRAMP expression file, the description below says departure is after 3 am but from the expression it seems that it would be 3 pm instead of 3 am",,,
util_escort_fulltime_worker_departure_after_3_am_linear,ESCORT - Full-time worker - Departure after 3:00 am - Linear,"@np.where(((df.ptype == 1) & (df.start>24)), (np.where((df.start<=24), np.minimum(24-df.start,3), 0) + np.where((df.start>24), np.minimum(df.start-24,9), 0)), 0)",coef_escort_fulltime_worker_departure_after_3_am_linear
util_escort_fulltime_worker_duration_less_than_30_minutes,ESCORT - Full-time worker - Duration < 0.5 hr,"@np.where(((df.ptype == 1) & (df.duration<1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_fulltime_worker_duration_less_than_30_minutes
util_escort_fulltime_worker_duration_greater_than_30_minutes,ESCORT - Full-time worker - Duration > 0.5 hr,"@np.where(((df.ptype == 1) & (df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_fulltime_worker_duration_greater_than_30_minutes
util_escort_university_student_duration_less_than_30_minutes,ESCORT - University student - Duration < 0.5 hr,"@np.where(((df.ptype == 3) & (df.duration<1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_university_student_duration_less_than_30_minutes
util_escort_non_driving_age_student_duration_greater_than_30_minutes,ESCORT - Non-driving age student - Duration > 0.5 hr,"@np.where((((df.ptype == 7)|(df.ptype == 8)) & (df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_non_driving_age_student_duration_greater_than_30_minutes
util_escort_driving_age_student_duration_less_than_30_minutes,ESCORT - Driving age student - Duration < 0.5 hr,"@np.where(((df.ptype == 6) & (df.duration<1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_driving_age_student_duration_less_than_30_minutes
util_escort_driving_age_student_duration_greater_than_30_minutes,ESCORT - Driving age student - Duration > 0.5 hr,"@np.where(((df.ptype == 6) & (df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_driving_age_student_duration_greater_than_30_minutes
"#Note: In CTRAMP expression file, description says the expression below is for duration > 0.5 hr but the expression says duration < 0.5 hr",,,
util_escort_pre_school_kid_duration_greater_than_30_minutes,ESCORT - Pre-school kid - Duration > 0.5 hr,"@np.where(((df.ptype == 8) & (df.duration<1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_pre_school_kid_duration_greater_than_30_minutes
util_escort_med_high_income_duration_greater_than_30_minutes,ESCORT - Med-high income (60k to 120k) - Duration > 0.5 hr,"@np.where(((df.is_income_60K_to_120K) & (df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_med_high_income_duration_greater_than_30_minutes
util_escort_households_with_no_kids_departure_before_7_30_am,"ESCORT - Households with no kids (Dummy- 1,0) - Departure before 7:30 AM","@np.where(((df.num_children == 0) & (df.start<10)), (np.where((df.start<=10), np.minimum(10-df.start,7), 0) + np.where((df.start>10), np.minimum(df.start-10,35), 0)), 0)",coef_escort_households_with_no_kids_departure_before_7_30_am
util_escort_households_with_no_kids_departure_after_8_00_am,"ESCORT - Households with no kids (Dummy- 1,0) - Departure after 8:00 AM","@np.where(((df.num_children == 0) & (df.start>10)), (np.where((df.start<=10), np.minimum(10-df.start,7), 0) + np.where((df.start>10), np.minimum(df.start-10,35), 0)), 0)",coef_escort_households_with_no_kids_departure_after_8_00_am
util_escort_households_with_no_kids_departure_before_2_30_pm,"ESCORT - Households with no kids (Dummy- 1,0) - Departure before 2:30 PM","@np.where(((df.num_children == 0) & (df.start<24)), (np.where((df.start<=24), np.minimum(24-df.start,3), 0) + np.where((df.start>24), np.minimum(df.start-24,9), 0)), 0)",coef_escort_households_with_no_kids_departure_before_2_30_pm
util_escort_households_with_no_kids_departure_after_3_00_pm,"ESCORT - Households with no kids (Dummy- 1,0) - Departure after 3:00 PM","@np.where(((df.num_children == 0) & (df.start>24)), (np.where((df.start<=24), np.minimum(24-df.start,3), 0) + np.where ((df.start>24), np.minimum(df.start-24,9), 0)), 0)",coef_escort_households_with_no_kids_departure_after_3_00_pm
util_escort_households_with_no_kids_arrival_before_8_am,"ESCORT - Households with no kids (Dummy- 1,0) - Arrival before 8:00 AM","@np.where(((df.num_children == 0) & (df.end<11)), (np.where((df.end<=11), np.minimum(11-df.end,7), 0) + np.where((df.end>11), np.minimum(df.end-11,35), 0)), 0)",coef_escort_households_with_no_kids_arrival_before_8_am
util_escort_households_with_no_kids_arrival_after_8_30_am,"ESCORT - Households with no kids (Dummy- 1,0) - Arrival after 8:30 AM","@np.where(((df.num_children == 0) & (df.end>11)), (np.where((df.end<=11), np.minimum(11-df.end,7), 0) + np.where((df.end>11), np.minimum(df.end-11,35), 0)), 0)",coef_escort_households_with_no_kids_arrival_after_8_30_am
util_escort_households_with_no_kids_arrival_before_3_pm,"ESCORT - Households with no kids (Dummy- 1,0) - Arrival before 3:00 PM","@np.where(((df.num_children == 0) & (df.end<25)), (np.where((df.end<=25), np.minimum(25-df.end,3), 0) + np.where((df.end>25), np.minimum(df.end-25,9), 0)), 0)",coef_escort_households_with_no_kids_arrival_before_3_pm
util_escort_households_with_no_kids_arrival_after_3_30_pm,"ESCORT - Households with no kids (Dummy- 1,0) - Arrival after 3:30 PM","@np.where(((df.num_children == 0) & (df.end>25)), (np.where((df.end<=25), np.minimum(25-df.end,3), 0) + np.where((df.end>25), np.minimum(df.end-25,9), 0)), 0)",coef_escort_households_with_no_kids_arrival_after_3_30_pm
util_escort_pre_school_child_in_hh_with_mandatory_tour_departure_after_8_am,"ESCORT - Pre-School Child in HH with Mandatory tour (Dummy- 1,0) - Departure after 8:00 AM","@np.where(((df.has_pre_school_child_with_mandatory > 0) & (df.start>10)), (np.where((df.start<=10), np.minimum(10-df.start,7), 0) + np.where((df.start>10), np.minimum(df.start-10,35), 0)), 0)",coef_escort_pre_school_child_in_hh_with_mandatory_tour_departure_after_8_am
util_escort_pre_school_child_in_hh_with_mandatory_tour_departure_after_3_pm,"ESCORT - Pre-School Child in HH with Mandatory tour (Dummy- 1,0) - Departure after 3:00 PM","@np.where(((df.has_pre_school_child_with_mandatory > 0) & (df.start>24)), (np.where((df.start<=24), np.minimum(24-df.start,3), 0) + np.where((df.start>24), np.minimum(df.start-24,9), 0)), 0)",coef_escort_pre_school_child_in_hh_with_mandatory_tour_departure_after_3_pm
util_escort_pre_school_child_in_hh_with_mandatory_tour_arrival_before_8_am,"ESCORT -Pre-School Child in HH with Mandatory tour (Dummy- 1,0) - Arrival before 8:00 AM","@np.where(((df.has_pre_school_child_with_mandatory > 0) & (df.end<11)), (np.where((df.end<=11), np.minimum(11-df.end,7), 0) + np.where((df.end>11), np.minimum(df.end-11,35), 0)), 0)",coef_escort_pre_school_child_in_hh_with_mandatory_tour_arrival_before_8_am
util_escort_pre_school_child_in_hh_with_mandatory_tour_arrival_before_3_pm,"ESCORT - Pre-School Child in HH with Mandatory tour (Dummy- 1,0) - Arrival before 3:00 PM","@np.where(((df.has_pre_school_child_with_mandatory > 0) & (df.end<25)), (np.where((df.end<=25), np.minimum(25-df.end,3), 0) + np.where((df.end>25), np.minimum(df.end-25,9), 0)), 0)",coef_escort_pre_school_child_in_hh_with_mandatory_tour_arrival_before_3_pm
util_escort_driving_age_school_child_in_hh_with_mandatory_tour_departure_after_8_am,"ESCORT - Driving age School Child in HH with Mandatory tour (Dummy- 1,0) - Departure after 8:00 AM","@np.where(((df.has_driving_age_child_with_mandatory > 0) & (df.start>10)), (np.where((df.start<=10), np.minimum(10-df.start,7), 0) + np.where ((df.start>10), np.minimum(df.start-10,35), 0)), 0)",coef_escort_driving_age_school_child_in_hh_with_mandatory_tour_departure_after_8_am
util_escort_driving_age_school_child_in_hh_with_mandatory_tour_arrival_after_8_30_am,"ESCORT - Driving age School Child in HH with Mandatory tour (Dummy- 1,0) - Arrival after 8:30 AM","@np.where(((df.has_driving_age_child_with_mandatory > 0) & (df.end>11)), (np.where((df.end<=11), np.minimum(11-df.end,7), 0) + np.where((df.end>11), np.minimum(df.end-11,35), 0)), 0)",coef_escort_driving_age_school_child_in_hh_with_mandatory_tour_arrival_after_8_30_am
util_escort_driving_age_school_child_in_hh_with_mandatory_tour_arrival_after_3_30_pm,"ESCORT - Driving age School Child in HH with Mandatory tour (Dummy- 1,0) - Arrival after 3:30 PM","@np.where(((df.has_driving_age_child_with_mandatory > 0) & (df.end>25)), (np.where((df.end<=25), np.minimum(25-df.end,3), 0) + np.where((df.end>25), np.minimum(df.end-25,9), 0)), 0)",coef_escort_driving_age_school_child_in_hh_with_mandatory_tour_arrival_after_3_30_pm
util_escort_number_of_autos_greater_than_number_of_adults_duration_greater_than_30_minutes,ESCORT - Number of autos greater than number of adults - Duration > 0.5 hr,"@np.where(((df.auto_ownership > 0) & (df.auto_ownership > df.num_adults) & (df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)), 0)",coef_escort_number_of_autos_greater_than_number_of_adults_duration_greater_than_30_minutes
util_escort_number_of_individual_tours_duration_greater_than_30_minutes,ESCORT -Number of Individual Tours (excluding escorting) - Duration > 0.5 hr,"@np.where(((df.num_non_escort_tours > 0) & (df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)) * (df.num_non_escort_tours), 0)",coef_escort_number_of_individual_tours_duration_greater_than_30_minutes
util_escort_number_of_joint_tours_duration_greater_than_30_minutes,ESCORT - Number of joint tours - Duration > 0.5 hr,"@np.where(((df.duration>1)), (np.where((df.duration<=1), np.minimum(1-df.duration,0), 0) + np.where((df.duration>1), np.minimum(df.duration-1,47), 0)) *(df.num_joint_tours), 0)",coef_escort_number_of_joint_tours_duration_greater_than_30_minutes
util_escort_departure_constant_shift_for_every_30_minutes_before_6_30_am_linear,ESCORT - Departure Constant: Shift for every 30 minutes before 06:30 am - Linear,"@np.where(((df.start<8)), (np.where((df.start<8), np.minimum(8-df.start,4), 0) + np.where((df.start>13), np.minimum(df.start-13,28), 0)), 0)",coef_escort_departure_constant_shift_for_every_30_minutes_before_6_30_am_linear
util_escort_departure_constant_before_7_am,ESCORT - Departure Constant: Before 07:00 AM,@((df.start<9)),coef_escort_departure_constant_before_7_am
util_escort_departure_constant_7_am_to_7_30_am,ESCORT - Departure Constant: 07:00 AM - 07:30 AM,@((df.start==9)),coef_escort_departure_constant_7_am_to_7_30_am
util_escort_departure_constant_7_30_am_to_8_am,ESCORT - Departure Constant: 07:30 AM - 08:00 AM,@((df.start==10)),coef_escort_departure_constant_7_30_am_to_8_am
util_escort_departure_constant_8_am_to_8_30_am,ESCORT - Departure Constant: 08:00 AM - 08:30 AM,@((df.start==11)),coef_escort_departure_constant_8_am_to_8_30_am
util_escort_departure_constant_8_30_am_to_9_am,ESCORT - Departure Constant: 08:30 AM - 09:00 AM,@((df.start==12)),coef_escort_departure_constant_8_30_am_to_9_am
util_escort_departure_constant_after_9_am,ESCORT - Departure Constant: After 09:00 AM,@((df.start>12)),coef_escort_departure_constant_after_9_am
util_escort_departure_constant_1_30_pm_to_2_pm,ESCORT - Departure Constant: 01:30 PM - 02:00 PM,@((df.start==22)),coef_escort_departure_constant_1_30_pm_to_2_pm
util_escort_departure_constant_2_pm_to_2_30_pm,ESCORT - Departure Constant: 02:00 PM - 02:30 PM,@((df.start==23)),coef_escort_departure_constant_2_pm_to_2_30_pm
util_escort_departure_constant_2_30_pm_to_3_pm,ESCORT - Departure Constant: 02:30 PM - 03:00 PM,@((df.start==24)),coef_escort_departure_constant_2_30_pm_to_3_pm
util_escort_departure_constant_3_pm_to_3_30_pm,ESCORT - Departure Constant: 03:00 PM - 03:30 PM,@((df.start==25)),coef_escort_departure_constant_3_pm_to_3_30_pm
util_escort_departure_constant_after_3_30_pm,ESCORT - Departure Constant: After 03:30 PM,@((df.start>25)),coef_escort_departure_constant_after_3_30_pm
util_escort_departure_constant_shift_for_every_30_minutes_after_9_30_am_linear,ESCORT - Departure Constant: Shift for every 30 minutes after 9:30 am - Linear,"@np.where(((df.start>13)), (np.where((df.start<8), np.minimum(8-df.start,4), 0) + (np.where((df.start>13), np.minimum(df.start-13,28), 0))), 0)",coef_escort_departure_constant_shift_for_every_30_minutes_after_9_30_am_linear
util_escort_departure_constant_shift_for_every_30_minutes_after_4_pm_linear,ESCORT - Departure Constant: Shift for every 30 minutes after 4:00 pm - Linear,"@np.where(((df.start>26)), (np.where((df.start<0), np.minimum(0-df.start,48), 0) + np.where((df.start>26), np.minimum(df.start-26,15),0)), 0)",coef_escort_departure_constant_shift_for_every_30_minutes_after_4_pm_linear
util_escort_arrival_constant_shift_for_every_30_minutes_before_6_30_am_linear,ESCORT - Arrival Constant: Shift for every 30 minutes before 6:30 am - Linear,"@np.where(((df.end<8)), (np.where((df.end<8), np.minimum(8-df.end,2), 0) + np.where((df.end>13), np.minimum(df.end-13,30), 0)), 0)",coef_escort_arrival_constant_shift_for_every_30_minutes_before_6_30_am_linear
util_escort_arrival_constant_before_7_am,ESCORT - Arrival Constant: Before 07:00 AM,@((df.end<9)),coef_escort_arrival_constant_before_7_am
util_escort_arrival_constant_7_am_to_7_30_am,ESCORT - Arrival Constant: 07:00 AM - 07:30 AM,@((df.end==9)),coef_escort_arrival_constant_7_am_to_7_30_am
util_escort_arrival_constant_7_30_am_to_8_am,ESCORT - Arrival Constant: 07:30 AM - 08:00 AM,@((df.end==10)),coef_escort_arrival_constant_7_30_am_to_8_am
util_escort_arrival_constant_8_am_to_8_30_am,ESCORT - Arrival Constant: 08:00 AM - 08:30 AM,@((df.end==11)),coef_escort_arrival_constant_8_am_to_8_30_am
util_escort_arrival_constant_8_30_am_to_9_am,ESCORT - Arrival Constant: 08:30 AM - 09:00 AM,@((df.end==12)),coef_escort_arrival_constant_8_30_am_to_9_am
util_escort_arrival_constant_after_9_am,ESCORT - Arrival Constant: After 09:00 AM,@((df.end>12)),coef_escort_arrival_constant_after_9_am
util_escort_arrival_constant_2_30_pm_to_3_pm,ESCORT - Arrival Constant: 02:30 PM - 03:00 PM,@((df.end==24)),coef_escort_arrival_constant_2_30_pm_to_3_pm
util_escort_arrival_constant_3_pm_to_3_30_pm,ESCORT - Arrival Constant: 03:00 PM - 03:30 PM,@((df.end==25)),coef_escort_arrival_constant_3_pm_to_3_30_pm
util_escort_arrival_constant_3_30_pm_to_4_pm,ESCORT - Arrival Constant: 03:30 PM - 04:00 PM,@((df.end==26)),coef_escort_arrival_constant_3_30_pm_to_4_pm
util_escort_arrival_constant_4_pm_to_4_30_pm,ESCORT - Arrival Constant: 04:00 PM - 04:30 PM,@((df.end==27)),coef_escort_arrival_constant_4_pm_to_4_30_pm
util_escort_arrival_constant_after_4_30_pm,ESCORT - Arrival Constant: After 04:30 PM,@((df.end>27)),coef_escort_arrival_constant_after_4_30_pm
util_escort_arrival_constant_shift_for_every_30_minutes_after_9_30_am_linear,ESCORT - Arrival Constant: Shift for every 30 minutes after 9:30 am - Linear,"@np.where(((df.end>13)), (np.where((df.end<8), np.minimum(8-df.end,2), 0) + np.where((df.end>13), np.minimum(df.end-13,30), 0)), 0)",coef_escort_arrival_constant_shift_for_every_30_minutes_after_9_30_am_linear
util_escort_arrival_constant_shift_for_every_30_minutes_after_5_pm_linear,ESCORT - Arrival Constant: Shift for every 30 minutes after 5:00 pm - Linear,"@np.where(((df.end>28)), (np.where((df.end<0), np.minimum(0-df.end,48), 0) + np.where((df.start>28), np.minimum(df.end-28,15), 0)), 0)",coef_escort_arrival_constant_shift_for_every_30_minutes_after_5_pm_linear
util_escort_duration_constant_0_hour,ESCORT - Duration Constant: 0 hr,@((df.duration==0)),coef_escort_duration_constant_0_hour
util_escort_duration_constant_30_minutes,ESCORT - Duration Constant: 0.5 hr,@((df.duration==1)),coef_escort_duration_constant_30_minutes
util_escort_duration_constant_1_hour,ESCORT - Duration Constant: 1 hr,@((df.duration==2)),coef_escort_duration_constant_1_hour
util_escort_duration_constant_1_hour_30_minutes,ESCORT - Duration Constant: 1.5hrs,@((df.duration==3)),coef_escort_duration_constant_1_hour_30_minutes
util_escort_duration_constant_2_hours,ESCORT - Duration Constant: 2 hrs,@((df.duration==4)),coef_escort_duration_constant_2_hours
util_escort_duration_constant_longer_than_2_hours,ESCORT - Duration Constant: Longer than 2 hrs,@((df.duration>4)),coef_escort_duration_constant_longer_than_2_hours
util_escort_calibration_constant_duration_1,ESCORT - Calibration Constant - Duration = 1,@((df.duration==0)),coef_escort_calibration_constant_duration_1
util_escort_calibration_constant_duration_2,ESCORT - Calibration Constant - Duration = 2,@((df.duration==1)),coef_escort_calibration_constant_duration_2
util_escort_calibration_constant_departure_9,ESCORT - Calibration Constant - Departure = 9,@((df.start==9)),coef_escort_calibration_constant_departure_9
util_escort_calibration_constant_departure_10,ESCORT - Calibration Constant - Departure = 10,@((df.start==10)),coef_escort_calibration_constant_departure_10
util_escort_calibration_constant_departure_23,ESCORT - Calibration Constant - Departure = 23,@((df.start==23)),coef_escort_calibration_constant_departure_23
util_escort_calibration_constant_departure_24,ESCORT - Calibration Constant - Departure = 24,@((df.start==24)),coef_escort_calibration_constant_departure_24
