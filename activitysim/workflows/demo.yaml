context_parser: pypyr.parser.keyvaluepairs
steps:

- name: pypyr.steps.default
  in:
    defaults:
      example_name: example_mtc
      workspace: workspace
      legacy: True
      tag:

- description: Make {workspace} directory if it does not exist
  name: activitysim.workflows.py
  in:
    py: |
      import os
      os.makedirs(f"{workspace}", exist_ok=True)

- description: Generate a tag based on datetime if tag is not given
  name: activitysim.workflows.py
  in:
    label: Generate tag
    py: |
      import time
      if tag is None:
        tag = time.strftime("%Y-%m-%d-%H%M%S")
      time.sleep(2)
      save(tag=tag)
      print(f"tag is {tag}")

- description: Ping Google
  name: activitysim.workflows.cmd
  in:
    cmd:
      run: ping google.com
