

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Workflows &#8212; ActivitySim 1.2.1.dev13+g372f943c</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dev-guide/workflows';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://activitysim.github.io/activitysim/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.2.1';
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Software Development" href="../development.html" />
    <link rel="prev" title="Using Skim Dataset" href="skim-dataset.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">ActivitySim 1.2.1.dev13+g372f943c</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../users-guide/index.html">
                        Users Guide
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      1.2.1  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../users-guide/index.html">
                        Users Guide
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      1.2.1  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">Developer Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-sharrow.html">Using Sharrow</a></li>
<li class="toctree-l1"><a class="reference internal" href="skim-dataset.html">Using Skim Dataset</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="components/index.html">Components</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="components/trip_destination.html">Trip Destination</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core.html">Core Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarking.html">Benchmarking</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Developers</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Workflows</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="workflows">
<span id="id1"></span><h1>Workflows<a class="headerlink" href="#workflows" title="Permalink to this headline">#</a></h1>
<p>ActivitySim workflows use the <a class="reference external" href="https://pypyr.io/"><code class="docutils literal notranslate"><span class="pre">pypyr</span></code></a> library. This
task runner is more flexible than orca, and relies on isolated ‘context’
namespaces rather than storing tables and configurations in Python’s
global state. Workflows are activated using the <code class="docutils literal notranslate"><span class="pre">activitysim</span> <span class="pre">workflow</span></code>
command line interface.</p>
<p>You can run a workflow from a local working directory, or one of
a number of pre-packaged workflows that are included with ActivitySim.</p>
<section id="workflows-for-performance-monitoring">
<h2>Workflows for Performance Monitoring<a class="headerlink" href="#workflows-for-performance-monitoring" title="Permalink to this headline">#</a></h2>
<p>A collection of workflows used to compare the new <em>sharrow</em> code against
legacy implementations can be found in the
<a class="reference external" href="https://github.com/camsys/activitysim/tree/sharrow-black/activitysim/workflows/sharrow-contrast">sharrow-contrast</a>
workflow subdirectory. Each of these first runs the relevant example model in
test mode to compile the relevant functions, and then runs in production mode
to measure runtime and memory usage.  This is followed by another run in
“legacy” mode that does not use sharrow, as well as a run in a reference
implementation (version 1.1.3).  Finally, a report is generated comparing the
results of these various runs, to illustrate performance and validiate output
quality.</p>
<section id="mini-examples">
<h3>Mini Examples<a class="headerlink" href="#mini-examples" title="Permalink to this headline">#</a></h3>
<p>A collection of “mini” example workflows is provided for typical performance analysis.
Each mini example is based on a small or medium size subarea for each model,
and each runs in single-process mode to illustrate the performance and memory
usage succinctly.  These mini examples are sized so they should run on a typical
modeler’s laptop (e.g. a modern CPU, 32 GB of RAM).</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Workflow</p></th>
<th class="text-left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>mtc_mini</p></td>
<td class="text-left"><p>Prototype MTC model on 50K households in San Francisco (190 zones)</p></td>
</tr>
<tr class="row-odd"><td><p>arc_mini</p></td>
<td class="text-left"><p>Prototype ARC model on 10K households in Fulton County (1,296 zones)</p></td>
</tr>
<tr class="row-even"><td><p>sandag_1zone_mini</p></td>
<td class="text-left"><p>Placeholder SANDAG 1-Zone model on 50K households in a test region (90 zones)</p></td>
</tr>
<tr class="row-odd"><td><p>sandag_2zone_mini</p></td>
<td class="text-left"><p>Placeholder SANDAG 2-Zone model on 50K households in a test region (90 TAZs, 690 MAZs)</p></td>
</tr>
<tr class="row-even"><td><p>sandag_3zone_mini</p></td>
<td class="text-left"><p>Placeholder SANDAG 3-Zone model on 50K households in a test region (90 TAZs, 690 MAZs)</p></td>
</tr>
<tr class="row-odd"><td><p>sandag_xborder_mini</p></td>
<td class="text-left"><p>Prototype SANDAG Cross-Border model on 50K tours in a test region (94 TAZs, 586 MAZs)</p></td>
</tr>
<tr class="row-even"><td><p>psrc_mini</p></td>
<td class="text-left"><p>Placeholder PSRC Model on 50K households in Seattle (8400 MAZs)</p></td>
</tr>
<tr class="row-odd"><td><p>comprehensive-mini</p></td>
<td class="text-left"><p>Runs all “mini” workflows listed above (warning, this takes a long time!)</p></td>
</tr>
</tbody>
</table>
<p>To invoke a pre-packaged workflow, you can provide the workflow’s
name and location within the <code class="docutils literal notranslate"><span class="pre">activitysim/workflows</span></code> directory.
For example, to run the workflow of all “mini” examples, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>activitysim<span class="w"> </span>workflow<span class="w"> </span>sharrow-contrast/comprehensive-mini
</pre></div>
</div>
</section>
<section id="full-size-examples">
<h3>Full Size Examples<a class="headerlink" href="#full-size-examples" title="Permalink to this headline">#</a></h3>
<p>Running a “full size” example of an ActivitySim model generally requires more
compute resources than the smaller performance tests shown above.  These models
generally require <a class="reference internal" href="../core.html#chunk-size"><span class="std std-ref">chunking</span></a> to run, and servers with substantial
amounts of RAM.</p>
<p>The “mp” workflows listed below will run each listed example in multiprocess mode.
They will attempt to automatically scale the number of processes and the chunk
size to the available resources of the server where they are run, but some models
require substantial resources and may not run correctly on inadequate hardware.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Workflow</p></th>
<th class="text-left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>mtc_mp</p></td>
<td class="text-left"><p>Prototype MTC model</p></td>
</tr>
<tr class="row-odd"><td><p>arc_mp</p></td>
<td class="text-left"><p>Prototype ARC model, 5,922 zones</p></td>
</tr>
<tr class="row-even"><td><p>sandag_1zone_mp</p></td>
<td class="text-left"><p>Placeholder SANDAG 1-Zone model, 1.2M households and 4,984 zones</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="skim-dataset.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Using Skim Dataset</p>
      </div>
    </a>
    <a class="right-next"
       href="../development.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Software Development</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows-for-performance-monitoring">Workflows for Performance Monitoring</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mini-examples">Mini Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#full-size-examples">Full Size Examples</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/dev-guide/workflows.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><!-- This will display the version of the docs -->
<p class="last-updated">
ActivitySim 1.2.1.dev13+g372f943c, documentation last updated Apr 11, 2023.<br/>
</p></div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>