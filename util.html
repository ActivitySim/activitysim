

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Internal Utilities &mdash; ActivitySim 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ActivitySim 0.1 documentation" href="index.html"/>
        <link rel="prev" title="MNL Utilities" href="mnl.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ActivitySim
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">Core Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="skim.html">Skim Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdap.html">CDAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="mnl.html">MNL Utilities</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Internal Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-activitysim.util.reindex">Reindex</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-activitysim.util.testing">Testing</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ActivitySim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Internal Utilities</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/util.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="internal-utilities">
<h1>Internal Utilities<a class="headerlink" href="#internal-utilities" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-activitysim.util.reindex">
<span id="reindex"></span><h2>Reindex<a class="headerlink" href="#module-activitysim.util.reindex" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="activitysim.util.reindex.reindex">
<code class="descclassname">activitysim.util.reindex.</code><code class="descname">reindex</code><span class="sig-paren">(</span><em>series1</em>, <em>series2</em><span class="sig-paren">)</span><a class="headerlink" href="#activitysim.util.reindex.reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>This reindexes the first series by the second series.  This is an extremely
common operation that does not appear to  be in Pandas at this time.
If anyone knows of an easier way to do this in Pandas, please inform the
UrbanSim developers.</p>
<p>The canonical example would be a parcel series which has an index which is
parcel_ids and a value which you want to fetch, let&#8217;s say it&#8217;s land_area.
Another dataset, let&#8217;s say of buildings has a series which indicate the
parcel_ids that the buildings are located on, but which does not have
land_area.  If you pass parcels.land_area as the first series and
buildings.parcel_id as the second series, this function returns a series
which is indexed by buildings and has land_area as values and can be
added to the buildings dataset.</p>
<p>In short, this is a join on to a different table using a foreign key
stored in the current table, but with only one attribute rather than
for a full dataset.</p>
<p>This is very similar to the pandas &#8220;loc&#8221; function or &#8220;reindex&#8221; function,
but neither of those functions return the series indexed on the current
table.  In both of those cases, the series would be indexed on the foreign
table and would require a second step to change the index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>series1, series2</strong> : pandas.Series</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>reindexed</strong> : pandas.Series</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-activitysim.util.testing">
<span id="testing"></span><h2>Testing<a class="headerlink" href="#module-activitysim.util.testing" title="Permalink to this headline">¶</a></h2>
<p>Utilities used in testing of ActivitySim.</p>
<dl class="function">
<dt id="activitysim.util.testing.assert_frames_equal">
<code class="descclassname">activitysim.util.testing.</code><code class="descname">assert_frames_equal</code><span class="sig-paren">(</span><em>actual</em>, <em>expected</em>, <em>use_close=False</em><span class="sig-paren">)</span><a class="headerlink" href="#activitysim.util.testing.assert_frames_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare DataFrame items by index and column and
raise AssertionError if any item is not equal.</p>
<p>Ordering is unimportant, items are compared only by label.
NaN and infinite values are supported.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>actual</strong> : pandas.DataFrame</p>
<p><strong>expected</strong> : pandas.DataFrame</p>
<p><strong>use_close</strong> : bool, optional</p>
<blockquote class="last">
<div><p>If True, use numpy.testing.assert_allclose instead of
numpy.testing.assert_equal.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="mnl.html" class="btn btn-neutral" title="MNL Utilities" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, UrbanSim Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>